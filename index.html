<html>
<head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="css/main.css" />
	
	<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.5/angular.min.js"></script>
	
	<script src="js/democracyGame.js"></script>
	<script src="js/constantsService.js"></script>
	<script src="js/gameDataService.js"></script>
	<script src="js/gameController.js"></script>
	
	<title>Avocado Republic</title>
	
</head>
<body>

	<div ng-app="democracyGame">
	
		<nav class="navbar">
		  <div class="container">
			<div class="navbar-header">
			  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			  </button>
			  <a class="navbar-brand" href="#">
				<img src="img/logo.png" alt="Avocado Republic" />
			  </a>
			</div>
		  </div>
		</nav>
	
		<div ng-controller="gameController">
			<div class="jumbotron">
				<div class="container">
					<h1>{{money | currency}}</h1>
					<p>Income per second: {{incomePerSecond() | currency}}</p>
					<p><button ng-click="doSomethingDemocratic()">{{democraticAction}} (+$100)</button></p>
				</div>
			</div>
		
			<div class="container">			
				
				<div class="row">
					<div class="col-md-4">					
				
						<h2>Stats &amp; Immigration</h2>
						
						<p>Tax rate: {{taxRate() | number : 2}}%<br />
						Annual per capita income: {{perCapitaIncomePerYear() | currency}}<br />
						Population growth rate: {{birthRate() | number : 2}} per thousand per year<br />
						Approval rating: {{approvalRating() | number : 2}}%</p>
							
						<p ng-repeat="race in races">
							<img ng-src="{{'img/' + race.name + '.jpg'}}" class="raceicon" />
							<button ng-disabled="money < race.immigrationCost" ng-click="buyImmigrant(race)">Buy a {{race.name}} immigrant {{race.immigrationCost | currency}}</button>
						</p>
					
					</div>
					<div class="col-md-4">	
						
						<h2>Policies</h2>				
					
						<div ng-repeat="policy in policies">
							<button ng-click="buyPolicy(policy)" ng-disabled="!canBuyPolicy(policy)" class="policy">
							{{policy.name}} {{policy.cost | currency}}<br />
							{{policy.description}}
							</button>
						</div>
						
						<div ng-show="enactedPolicies.length > 0">
							<h3>Enacted policies:</h3>
							<div ng-repeat="policy in enactedPolicies">
								{{policy.name}}
							</div>
						</div>
					
					</div>
					<div class="col-md-4">					
					
						<h2>Population</h2>
					
						<div class="progress">
						  <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="{{population()}}" aria-valuemin="0" aria-valuemax="{{carryingCapacity}}" style="max-width:100%; width: {{population() / carryingCapacity * 100}}%;">
							{{population() | number : 0}} / {{carryingCapacity | number : 0}} Total Population
						  </div>
						</div>
						
						<div class="progress">
							<div ng-repeat="race in races" class="progress-bar" style="background: {{race.color}}; width: {{populationPercentage(race.population) | number : 3}}%">
								{{populationPercentage(race.population) | number : 0}}% {{race.name}}
							</div>
						</div>
					
						<div>Population: {{population() | number : 0}}</div>
						<div>Average IQ: {{averageIQ() | number : 0}}</div>
						<div ng-repeat="race in races">
							{{race.name}}s: {{race.population | number : 0}}
						</div>
						<div>Carrying capacity: {{carryingCapacity}}</div>
					
					</div>
				</div>				
			
				
				
			</div>
		</div>
		
	</div>
</body>
</html>